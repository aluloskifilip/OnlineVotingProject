(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,a){},293:function(e,t,a){e.exports=a(501)},501:function(e,t,a){"use strict";a.r(t);var n=a(22),i=a(23),o=a(25),l=a(24),s=a(26),r=a(0),c=a.n(r),m=a(7),d=a.n(m),u=a(191),p=a(74),h=(a(206),a(298),a(112)),f=a.n(h),g=a(77),E=a.n(g),v=a(78),b=a.n(v),y=a(47),O=a.n(y),w=(a(94),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).signOut=function(){sessionStorage.removeItem("jwtToken"),a.setState({loggedIn:!1}),a.notificationDOMRef.current.addNotification({title:"Success!",message:"Successfully logged out!",type:"success",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}}),a.props.history.push("/")},a.state={loggedIn:!1,user:""},a.notificationDOMRef=c.a.createRef(),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=sessionStorage.getItem("jwtToken");t&&fetch("http://localhost:3001/api/verify",{method:"GET",headers:new Headers({Authorization:t,"Content-Type":"application/x-www-form-urlencoded"})}).then(function(t){200===t.status?t.json().then(function(t){e.setState({loggedIn:!0,user:t})}):e.setState({loggedIn:!1})})}},{key:"render",value:function(){var e,t=this;return e=!1===this.state.loggedIn?c.a.createElement(E.a,null,c.a.createElement(E.a.Link,{onClick:function(){return t.props.history.push("/login")}},"Sign In"),c.a.createElement(E.a.Link,{onClick:function(){return t.props.history.push("/register")}}," Sign Up")):c.a.createElement(E.a,{className:"dropdownToggle"},c.a.createElement(b.a,{title:this.state.user.name,id:"basic-nav-dropdown"},c.a.createElement(b.a.Item,{href:"#action/3.1"},"Action"),c.a.createElement(b.a.Item,{href:"#action/3.2"},"Another action"),c.a.createElement(b.a.Item,{href:"#action/3.3"},"Something"),c.a.createElement(b.a.Divider,null),c.a.createElement(b.a.Item,{onClick:this.signOut},"Sign Out"))),c.a.createElement(f.a,{bg:"secondary",expand:"lg",variant:"dark"},c.a.createElement(O.a,{ref:this.notificationDOMRef}),c.a.createElement(f.a.Brand,{href:"/"},"E-Vote"),c.a.createElement(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(f.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(E.a,{className:"mr-auto"},c.a.createElement(E.a.Link,{onClick:function(){return t.props.history.push("/")}},"Home")),e))}}]),t}(c.a.Component)),C=Object(p.d)(w),k=a(134),S=a(69),I=a.n(S),N=function(e){function t(e,a){var i;return Object(n.a)(this,t),(i=Object(o.a)(this,Object(l.a)(t).call(this,e,a))).handleSelect=i.handleSelect.bind(Object(k.a)(i)),i.state={index:0,direction:null},i}return Object(s.a)(t,e),Object(i.a)(t,[{key:"handleSelect",value:function(e,t){this.setState({index:e,direction:t.direction})}},{key:"render",value:function(){var e=this.state,t=e.index,a=e.direction;return c.a.createElement(I.a,{activeIndex:t,direction:a,onSelect:this.handleSelect},c.a.createElement(I.a.Item,null,c.a.createElement("img",{className:"d-block w-100",src:"https://worldofweirdthings.com/wp-content/uploads/evoting_1200.jpg",alt:"First slide",height:"600",width:"800"}),c.a.createElement(I.a.Caption,null,c.a.createElement("h3",null,"First slide label"),c.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),c.a.createElement(I.a.Item,null,c.a.createElement("img",{className:"d-block w-100",src:"https://image.chitra.live/api/v1/wps/504ee78/6712fd67-b5ed-48ca-a23b-340186752bc6/3/e-voting-620x354.jpg",alt:"Third slide",height:"600",width:"600"}),c.a.createElement(I.a.Caption,null,c.a.createElement("h3",null,"Second slide label"),c.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."))),c.a.createElement(I.a.Item,null,c.a.createElement("img",{className:"d-block w-100",src:"http://www.iheartradio.ca/image/policy:1.8457991:1537795476/Voting%20online-CarmenMurillo.jpg?a=16%3A9&w=1000&$p$a$w=0e94c4b   ",alt:"Third slide",height:"600",width:"600"}),c.a.createElement(I.a.Caption,null,c.a.createElement("h3",null,"Third slide label"),c.a.createElement("p",null,"Praesent commodo cursus magna, vel scelerisque nisl consectetur."))))}}]),t}(c.a.Component),j=a(36),D=a.n(j),P=a(40),x=a.n(P),T=a(154),R=a.n(T),M=a(190),A=a.n(M),L=a(73),V=a.n(L),_=a(287),F=a(257),z=(a(336),a(288)),H=a.n(z),B=a(145),Y=a.n(B),G=a(273),J=a.n(G),X=a(280),q=a(508),U=(a(353),a(513)),W=a(511),Z=a(16),$=a(515),K=a(516),Q=a(510),ee=a(507),te=a(514),ae=a(286),ne=a.n(ae),ie=a(274),oe=a.n(ie),le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={data:null,options:{chart:{id:"votesChart"},xaxis:{categories:[]}},series:[{name:"Voting Results",data:[]}]},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(!0===this.props.change){var t=e.data.options.map(function(e){return e.name}),a=e.data.options.map(function(e){return e.votes});this.setState({data:e.data,options:{xaxis:{categories:t}},series:[{data:a}]})}}},{key:"componentDidMount",value:function(){var e=this.props.data.options.map(function(e){return e.name}),t=this.props.data.options.map(function(e){return e.votes});this.setState({data:this.props.data,options:{xaxis:{categories:e}},series:[{data:t}]})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(oe.a,{options:this.state.options,series:this.state.series,type:"bar",width:500,height:330}))}}]),t}(c.a.Component),se=a(289),re=a(512),ce=a(506),me=a(509),de=a(155),ue=re.a.TextArea,pe=function(e){var t=e.comments;return c.a.createElement(Q.a,{dataSource:t,header:"".concat(t.length," Comments"),itemLayout:"horizontal",renderItem:function(e){return c.a.createElement(ce.a,e)}})},he=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,i=e.value;return c.a.createElement("div",null,c.a.createElement(me.a.Item,null,c.a.createElement(ue,{rows:4,onChange:t,value:i})),c.a.createElement(me.a.Item,null,c.a.createElement(de.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"Add Comment")))},fe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(){a.state.value&&a.props.user&&(a.setState({submitting:!0}),fetch("http://localhost:3001/api/comment",{method:"POST",body:JSON.stringify({pollId:a.props.data.id,authorId:a.props.user._id,authorName:a.props.user.name,value:a.state.value}),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status&&e.json().then(function(e){a.setState({submitting:!1,value:"",comments:[{author:e.authorName,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:c.a.createElement("p",null,e.content),datetime:e.createdAt}].concat(Object(se.a)(a.state.comments))})})}))},a.handleChange=function(e){a.setState({value:e.target.value})},a.state={submitting:!1,value:"",comments:[]},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){if(0!==this.props.data.comments.length){var e=this.props.data.comments.map(function(e){return{author:e.authorName,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:c.a.createElement("p",null,e.content),datetime:e.createdAt}});this.setState({comments:e})}}},{key:"render",value:function(){var e=this.state,t=e.comments,a=e.submitting,n=e.value;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},t.length>0&&c.a.createElement(pe,{comments:t}),c.a.createElement(ce.a,{avatar:c.a.createElement(ee.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:c.a.createElement(he,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:a,value:n})}))))}}]),t}(c.a.Component),ge=U.a.Countdown,Ee=W.a.Panel,ve=function(e){var t=e.type,a=e.text,n=e.onClick,i=e.display;return c.a.createElement("span",null,c.a.createElement(Z.a,{type:t,style:{marginRight:8,display:i},onClick:n}),a)},be={_id:"",author:"",authorId:"",title:"",options:[{_id:"",name:"",key:"",votes:0},{_id:"",name:"",key:"",votes:0}],expireDate:"",image:{_id:"",url:"",type:""},description:"",likes:0,comments:[],createdAt:"",updatedAt:"",__v:0},ye=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).getPolls=function(){a.setState({loading:!0},function(){fetch("http://localhost:3001/api/polls").then(function(e){200===e.status&&e.json().then(function(e){0!==e.length&&a.setState({loading:!1,polls:e,selectedPoll:e[0]},function(){a.populateData()})})})})},a.showNotification=function(e,t,a,n,i){e.current.addNotification({title:a,message:t,type:n,insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:i},dismissable:{click:!0}})},a.populateData=function(){var e=[];a.state.polls.forEach(function(t){e.push({title:t.title,avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:t.description,imageUrl:t.image.url,createdAt:t.createdAt,likes:t.likes,comments:t.comments,id:t._id,authorId:t.authorId})}),a.setState({listData:e,user:a.props.user})},a.handlePollClick=function(e){var t=a.getPollById(e),n=new Date(t.expireDate).valueOf();Date.now()>=n&&a.showNotification(a.notificationDOMREF,"This poll has expired so you won't be able to vote!","Info","warning",2e3),a.setState({visible:!0,selectedPoll:t})},a.handleOk=function(){a.setState({visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.getPollById=function(e){return a.state.polls.filter(function(t){return t._id===e})[0]},a.onChange=function(e){a.setState({radioValue:e.target.value})},a.handleClose=function(){a.setState({show:!1})},a.openSecondModal=function(){a.setState({show:!0})},a.handleOkVote=function(){var e={pollId:a.state.selectedPoll._id,voteId:a.state.radioValue,userId:a.state.user._id};fetch("http://localhost:3001/api/vote",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){if(200===t.status){var n=a.state.selectedPoll;n.options=a.state.selectedPoll.options.map(function(t){return 0===t._id.localeCompare(e.voteId)&&t.votes++,t});var i={pollId:e.pollId,voteId:e.voteId},o=a.state.user;o.votes.push(i),a.setState({selectedPoll:n,user:o,show:!1,change:!0},function(){setTimeout(function(){a.setState({change:!1})},2e3)})}else t.json().then(function(e){console.log(e)})})},a.checkForRadioAvailability=function(e,t){var n=new Date(t).valueOf();if(Date.now()>=n)return!0;if(a.props.isLoggedIn){var i=a.state.user.votes;return 0!==i.length&&0!==i.filter(function(t){return 0===t.pollId.localeCompare(e)}).length}return!0},a.checkIfChecked=function(e,t){if(a.props.isLoggedIn){var n=a.state.user.votes;return 0!==n.length&&0!==n.filter(function(e){return 0===e.voteId.localeCompare(t)}).length}return!1},a.addLike=function(e){a.props.isLoggedIn&&fetch("http://localhost:3001/api/like",{method:"POST",body:JSON.stringify({pollId:e}),headers:{"Content-Type":"application/json"}}).then(function(t){if(200===t.status){var n=a.state.listData.map(function(t){return 0===t.id.localeCompare(e)&&t.likes++,t});a.setState({listData:n})}})},a.deletePoll=function(e){fetch("http://localhost:3001/api/delete",{method:"POST",body:JSON.stringify({pollId:e}),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status?($.a.success("The pole was successfully removed!"),a.getPolls()):500===e.status&&$.a.error("There was an error while removing the poll! Try again!")})},a.checkIfSameAuthor=function(e,t){return a.props.isLoggedIn&&0===e.localeCompare(t._id)?"inline":"none"},a.state={loading:!1,polls:[],listData:[],visible:!1,selectedPoll:be,radioValue:null,show:!1,user:null,change:!1},a.notificationDOMREF=c.a.createRef(),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getPolls()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=null!==e?e:this.props;this.setState({user:a.user},function(){!0===e.hasChanged&&t.getPolls()})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col md-12"},c.a.createElement(K.a,{loading:this.state.loading,active:!0},c.a.createElement(Q.a,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:3},dataSource:this.state.listData,footer:c.a.createElement("div",null,c.a.createElement("b",null,"ant design")," footer part"),renderItem:function(t){return c.a.createElement(Q.a.Item,{key:t.title,actions:[c.a.createElement(ve,{type:"like-o",text:t.likes,onClick:function(){e.addLike(t.id)},display:"inline"}),c.a.createElement(W.a,{accordion:!0,bordered:!1,expandIcon:function(){return c.a.createElement(ve,{type:"message",text:t.comments.length,display:"inline"})}},c.a.createElement(Ee,{key:"1",header:""},c.a.createElement(fe,{data:t,user:e.state.user}))),c.a.createElement(ve,{type:"delete",onClick:function(){e.deletePoll(t.id)},display:e.checkIfSameAuthor(t.authorId,e.props.user)})],extra:c.a.createElement("button",{className:"invisible-button",onClick:function(){return e.handlePollClick(t.id)}},c.a.createElement("img",{width:272,alt:"logo",src:"http://localhost:3001/api/image/"+t.imageUrl}))},c.a.createElement(Q.a.Item.Meta,{avatar:c.a.createElement(ee.a,{src:t.avatar}),title:c.a.createElement("button",{className:"invisible-button",onClick:function(){return e.handlePollClick(t.id)}},t.title),description:"Created at: ".concat(new Date(e.state.selectedPoll.createdAt).toLocaleString("mk-MK",{timeZone:"UTC"}))}),t.content)}})))),c.a.createElement("div",{className:"row"},c.a.createElement(D.a,{show:this.state.show,onHide:this.handleClose},c.a.createElement(D.a.Header,{closeButton:!0},c.a.createElement(D.a.Title,null,"Are You Sure?")),c.a.createElement(D.a.Body,null,"By clicking OK you accept to vote for the selected option!"),c.a.createElement(D.a.Footer,null,c.a.createElement(V.a,{variant:"secondary",onClick:this.handleClose},"Close"),c.a.createElement(V.a,{variant:"primary",onClick:this.handleOkVote},"OK")))),c.a.createElement("div",{className:"row"},c.a.createElement(O.a,{ref:this.notificationDOMREF}),c.a.createElement(D.a,{size:"lg",show:this.state.visible,onHide:this.handleCancel,"aria-labelledby":"example-modal-sizes-title-lg"},c.a.createElement(D.a.Header,{closeButton:!0},c.a.createElement(D.a.Title,{id:"example-modal-sizes-title-lg"},this.state.selectedPoll.title)),c.a.createElement(D.a.Body,null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",null,c.a.createElement("small",null,"Author: ",this.state.selectedPoll.author))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("p",null,c.a.createElement("small",null,"Created at: ",new Date(this.state.selectedPoll.createdAt).toLocaleString("mk-MK",{timeZone:"UTC"})))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement(ge,{title:"Time Remaining",value:this.state.selectedPoll.expireDate,format:"D - H : m : s "})),c.a.createElement("div",{className:"col-md-12"},c.a.createElement(ne.a,{src:"http://localhost:3001/api/image/"+this.state.selectedPoll.image.url,alt:this.state.selectedPoll._id,height:300,fluid:!0})),c.a.createElement("div",{className:"col-md-12"},c.a.createElement("h6",null,"Description:"),c.a.createElement("h6",null,this.state.selectedPoll.description)),c.a.createElement(q.a,{orientation:"left"},"Voting Options"),c.a.createElement("div",{className:"col-md-3 mx-auto"},c.a.createElement(te.a.Group,{onChange:this.onChange,value:this.state.radioValue},this.state.selectedPoll.options.map(function(t){return c.a.createElement(te.a,{key:t._id,onClick:e.openSecondModal,value:t._id,disabled:e.checkForRadioAvailability(e.state.selectedPoll._id,e.state.selectedPoll.expireDate),checked:e.checkIfChecked(e.state.selectedPoll._id,t._id),defaultChecked:e.checkIfChecked(e.state.selectedPoll._id,t._id)},t.name)}))),c.a.createElement(q.a,{orientation:"left"},"Votes Result"),c.a.createElement("div",{className:"col-auto mx-auto"},c.a.createElement(le,{data:this.state.selectedPoll,change:this.state.change})),c.a.createElement(q.a,null)))))))}}]),t}(c.a.Component),Oe=function(e){function t(e,a){var i;return Object(n.a)(this,t),(i=Object(o.a)(this,Object(l.a)(t).call(this,e,a))).showNotification=function(e,t,a,n,i){e.current.addNotification({title:a,message:t,type:n,insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:i},dismissable:{click:!0}})},i.openModal=function(){var e=sessionStorage.getItem("jwtToken");i.state.loggedIn&&e?i.setState({lgShow:!0}):(i.showNotification(i.notificationDOMRef,"You have to be logged in to create a poll! Redirecting to Login page shortly! ","Info","warning",2e3),setTimeout(function(){return i.props.history.push("/login")},1500))},i.addOptions=function(){for(var e=!1,t=0;t<i.state.options.length;t++)if(i.state.options[t].key===i.textInput.value){e=!0;break}if(0!==i.textInput.value.localeCompare("")&&!e){var a=i.state.options;a.push({name:i.textInput.value,key:i.textInput.value,votes:0}),i.setState({options:a},function(){i.textInput.value=""})}},i.deleteItem=function(e){var t=i.state.options.filter(function(t){return t.key!==e});i.setState({options:t})},i.onRegister=function(){if(0===i.pollDescription.value.length||0===i.pollTitle.value.length||0===i.state.options.length||0===i.state.options.length)i.showNotification(i.notificationDOM,"All fields must not be empty!","Error","danger",2e3);else{var e={author:i.state.name,authorId:i.state.user._id,title:i.pollTitle.value,options:i.state.options,expireDate:i.state.endDate,description:i.pollDescription.value},t=new FormData;t.append("file",i.state.selectedFile),t.append("json",JSON.stringify(e)),i.setState({loading:!0}),J.a.post("http://localhost:3001/api/upload",t,{}).then(function(e){200===e.status&&(i.showNotification(i.notificationDOMRef,"The poll was successfully created!","Success","success",2e3),i.setState({lgShow:!1,loading:!1,changeOccurred:!0},function(){setTimeout(function(){i.setState({changeOccurred:!1})},2e3)}))})}},i.handleChange=function(e){i.setState({endDate:e})},i.handleFileChange=function(e){i.setState({selectedFile:e.target.files[0]})},i.state={lgShow:!1,name:"",options:[],endDate:new Date,selectedFile:null,loading:!1,user:null,loggedIn:!1,changeOccurred:!1},i.notificationDOMRef=c.a.createRef(),i.notificationDOM=c.a.createRef(),i}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=sessionStorage.getItem("jwtToken");t?fetch("http://localhost:3001/api/verify",{method:"GET",headers:new Headers({Authorization:t,"Content-Type":"application/x-www-form-urlencoded"})}).then(function(t){200===t.status&&t.json().then(function(t){e.setState({name:t.name,user:t,loggedIn:!0})})}):this.setState({loggedIn:!1})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(O.a,{ref:this.notificationDOMRef}),c.a.createElement("div",{className:"container-fluid p-0"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement(N,null)))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-md-center"},c.a.createElement("div",{className:"col-md-6 my-3 d-flex align-items-center flex-column"},c.a.createElement("h5",null,"To create your own poll, press the following button."),c.a.createElement("button",{type:"button",className:"btn btn-secondary hvr-bob",onClick:this.openModal},"Create Poll")))),c.a.createElement("div",null,c.a.createElement(D.a,{size:"lg",show:this.state.lgShow,onHide:function(){return e.setState({lgShow:!1})},"aria-labelledby":"example-modal-sizes-title-lg"},c.a.createElement(O.a,{ref:this.notificationDOM}),c.a.createElement(D.a.Header,{closeButton:!0},c.a.createElement(D.a.Title,{id:"example-modal-sizes-title-lg"},"Create A Poll")),c.a.createElement(D.a.Body,null,c.a.createElement(x.a.Group,null,c.a.createElement(x.a.Group,{controlId:"exampleForm.ControlInput1"},c.a.createElement(x.a.Label,null,"Poll Title"),c.a.createElement(x.a.Control,{type:"email",placeholder:"Enter Title For The Poll",ref:function(t){return e.pollTitle=t}})),c.a.createElement(x.a.Group,{controlId:"exampleForm.ControlSelect1"},c.a.createElement(x.a.Label,null,"Add Voting Options"),c.a.createElement(R.a,{className:"mb-3"},c.a.createElement(A.a,{placeholder:"Voting Option","aria-label":"Voting Option","aria-describedby":"basic-addon2",ref:function(t){return e.textInput=t}}),c.a.createElement(R.a.Append,null,c.a.createElement(V.a,{onClick:this.addOptions,variant:"outline-secondary"},"Add"))),c.a.createElement("ul",{className:"listOptions"},c.a.createElement(_.a,{duration:250,easing:"ease-out"},this.state.options.map(function(t){return c.a.createElement("li",{className:"lis hvr-bounce-out",onClick:function(){return e.deleteItem(t.key)},key:t.key},t.name)})))),c.a.createElement(H.a,null,c.a.createElement(Y.a,null,c.a.createElement(x.a.Group,{controlId:"datePicker"},c.a.createElement(x.a.Label,null,"How Long Will This Poll Be Active?"),c.a.createElement(R.a,null,c.a.createElement(F.a,{inline:!0,selected:this.state.endDate,onChange:this.handleChange,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"Time"})))),c.a.createElement(Y.a,{md:"6"},c.a.createElement(x.a.Group,{controlId:"fileUpload"},c.a.createElement(x.a.Label,null,"Upload Your Image"),c.a.createElement("form",{method:"post",action:"#",id:"#"},c.a.createElement("div",{className:"form-group files"},c.a.createElement("input",{type:"file",className:"form-control",multiple:"",onChange:this.handleFileChange})))))),c.a.createElement(x.a.Group,{controlId:"exampleForm.ControlTextarea1"},c.a.createElement(x.a.Label,null,"Description"),c.a.createElement(x.a.Control,{as:"textarea",rows:"3",ref:function(t){return e.pollDescription=t}})),c.a.createElement(V.a,{onClick:this.onRegister,variant:"primary"},"Submit")))),c.a.createElement(X.a,{spinning:this.state.loading})),c.a.createElement(q.a,null,"All Polls"),c.a.createElement(ye,{isLoggedIn:this.state.loggedIn,user:this.state.user,hasChanged:this.state.changeOccurred}))}}]),t}(c.a.Component),we=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.checkValidEmail()||a.notificationDOMRef.current.addNotification({title:"Error",message:"Invalid E-mail format!",type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3},dismissable:{click:!0}}),a.checkEmpty()&&a.notificationDOMRef.current.addNotification({title:"Error",message:"All fields are required. Please fill them all.",type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3},dismissable:{click:!0}}),a.checkValidEmail()&&!a.checkEmpty()&&fetch("http://localhost:3001/api/authenticate",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status?e.json().then(function(e){sessionStorage.setItem("jwtToken",e.token),a.notificationDOMRef.current.addNotification({title:"Success",message:"Successfully logged in!",type:"success",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}}),setTimeout(function(){document.location.href="/"},1e3)}):401===e.status&&e.json().then(function(e){a.notificationDOMRef.current.addNotification({title:"Error",message:e.error,type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}})})})},a.handleEmailChange=function(e){var t=e.target.value;a.setState({email:t})},a.handlePasswordChange=function(e){var t=e.target.value;a.setState({password:t})},a.checkValidEmail=function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a.state.email).toLowerCase())},a.checkEmpty=function(){return 0===a.state.email.length||0===a.state.password.length},a.state={email:"",password:""},a.notificationDOMRef=c.a.createRef(),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container login-container"},c.a.createElement(O.a,{ref:this.notificationDOMRef}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12 col-sm-6 login-form-1"},c.a.createElement("h3",null,"Login to E-Vote"),c.a.createElement("form",{onSubmit:this.onSubmit},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control",placeholder:"Your Email",onChange:this.handleEmailChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"password",className:"form-control",placeholder:"Your Password",onChange:this.handlePasswordChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"submit",className:"btnSubmit",value:"Login"}))))))}}]),t}(c.a.Component),Ce=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).componentDidMount=function(){a.checkEmpty()},a.onSumbit=function(e){e.preventDefault();var t={name:a.state.name,password:a.state.password,email:a.state.email},n=a.checkEmail(),i=a.checkEmpty();n||a.notificationDOMRef.current.addNotification({title:"Error",message:"Invalid E-mail format!",type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3},dismissable:{click:!0}}),i&&a.notificationDOMRef.current.addNotification({title:"Error",message:"All fields are required. Please fill them all.",type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3},dismissable:{click:!0}}),0!==a.state.password.localeCompare(a.state.repeatPassword)&&a.notificationDOMRef.current.addNotification({title:"Error",message:"Password and repeated password must match!",type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3},dismissable:{click:!0}}),n&&!i&&0===a.state.password.localeCompare(a.state.repeatPassword)&&fetch("http://localhost:3001/api/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status?(console.log(e.status),a.notificationDOMRef.current.addNotification({title:"Success",message:"Successfully registered!",type:"success",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}}),setTimeout(function(){document.location.href="/login"},1e3)):500===e.status&&e.json().then(function(e){a.notificationDOMRef.current.addNotification({title:"Error",message:e.error,type:"danger",insert:"top",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}})})})},a.handleEmailChange=function(e){var t=e.target.value;a.setState({email:t})},a.handleNameChange=function(e){var t=e.target.value;a.setState({name:t})},a.handlePasswordChange=function(e){var t=e.target.value;a.setState({password:t})},a.handleRepeatPasswordChange=function(e){var t=e.target.value;a.setState({repeatPassword:t})},a.checkEmpty=function(){return 0===a.state.email.length||0===a.state.name.length||0===a.state.password.length||0===a.state.repeatPassword.length},a.checkEmail=function(){if(0!==String(a.state.email).length)return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a.state.email).toLowerCase())},a.state={email:"",password:"",repeatPassword:"",name:""},a.notificationDOMRef=c.a.createRef(),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container login-container"},c.a.createElement(O.a,{ref:this.notificationDOMRef}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12 col-sm-6 login-form-1"},c.a.createElement("h3",null,"Register to E-Vote"),c.a.createElement("form",{onSubmit:this.onSumbit},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Your Name",onChange:this.handleNameChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",name:"email",className:"form-control",placeholder:"Your Email",onChange:this.handleEmailChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Your Password",onChange:this.handlePasswordChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"password",name:"reppassword",className:"form-control",placeholder:"Repeat Your Password",onChange:this.handleRepeatPasswordChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{id:"registerButton",type:"submit",className:"btnSubmit",value:"Register"}))))))}}]),t}(c.a.Component),ke=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={loggedIn:!1},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(u.a,null,c.a.createElement(c.a.Fragment,null,c.a.createElement(C,null),c.a.createElement(p.a,{exact:!0,path:"/",component:Oe}),c.a.createElement(p.a,{exact:!0,path:"/login",component:we}),c.a.createElement(p.a,{exact:!0,path:"/register",component:Ce})))}}]),t}(c.a.Component);d.a.render(c.a.createElement(ke,null),document.getElementById("root"))}},[[293,1,2]]]);
//# sourceMappingURL=main.25febcee.chunk.js.map